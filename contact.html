<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kapcsolat</title>

  <!-- Sötét mód előtöltés -->
  <script>
  (function() {
    try {
      var saved = localStorage.getItem('theme');
      var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (saved === 'dark' || (!saved && prefersDark)) {
        document.documentElement.classList.add('theme-dark');
      }
    } catch(e) {}
  })();
  </script>

  <!-- Stílusok (relatív útvonal) -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/menu.css">
  <link rel="stylesheet" href="css/form.css">

</head>
<body>

  <!-- Fejléc betöltése -->
  <div id="header"></div>

  <main>
    <h1>Kapcsolat</h1>
    <p>Ha kérdésed, észrevételed vagy javaslatod van, töltsd ki az alábbi űrlapot:</p>

    <!-- FIGYELEM: send_email.php csak akkor működik, ha PHP szerver (nem GitHub Pages) -->
    <form class="contact-form" action="send_email.php" method="POST">
      <label for="nev">Név</label>
      <input type="text" id="nev" name="nev" placeholder="Add meg a neved" required>

      <label for="email">E-mail cím</label>
      <input type="email" id="email" name="email" placeholder="Add meg az e-mail címed" required>

      <label for="uzenet">Üzenet</label>
      <textarea id="uzenet" name="uzenet" rows="6" placeholder="Írd ide az üzeneted..." required></textarea>

      <button type="submit">Küldés</button>
    </form>
  </main>

  <!-- Script-ek -->
  <script>
    // Menü betöltése (RELATÍV útvonal — ne kezdő /-sel)
    fetch('menu.html')
      .then(res => {
        if (!res.ok) throw new Error('Nem sikerült betölteni a menüt: ' + res.status);
        return res.text();
      })
      .then(html => {
        document.getElementById('header').innerHTML = html;

        // Aktív link kiemelése (robosztusabb: resolve-oljuk a href-et)
        const currentPath = location.pathname.replace(/\/$/, '/index.html');
        document.querySelectorAll('#header a').forEach(a => {
          try {
            const href = a.getAttribute('href') || '';
            const resolved = new URL(href, location.href).pathname.replace(/\/$/, '/index.html');
            if (resolved === currentPath) {
              a.setAttribute('aria-current', 'page');
            }
          } catch(e) {}
        });

        // Téma script betöltése (RELATÍV, egységes)
        const themeScript = document.createElement('script');
        themeScript.src = 'js/theme.js';
        document.body.appendChild(themeScript);

        // Mobilmenü nyitás (biztosítjuk, hogy gomb és nav létezzen)
        const toggle = document.getElementById('menu-toggle');
        const nav = document.getElementById('nav-links');
        if (toggle && nav) {
          toggle.addEventListener('click', () => {
            nav.classList.toggle('open');
            toggle.setAttribute('aria-expanded', nav.classList.contains('open'));
          });
        }
      })
      .catch(err => {
        console.error(err);
      });
  </script>

</body>
</html>